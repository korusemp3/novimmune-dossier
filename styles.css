:root{
  --bg:#06070a;
  --panel1: rgba(10,14,20,.78);
  --panel2: rgba(6,8,12,.74);
  --line: rgba(255,255,255,.10);
  --text:#eaf2ff;
  --muted:#97a6c6;
  --ok:#44ffb3;
  --warn:#ff4d7d;
  --cyan:#36d9ff;

  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;

  --r:18px;
  --shadow: 0 18px 50px rgba(0,0,0,.58);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:var(--sans);
  color:var(--text);
  background:
    radial-gradient(900px 600px at 60% 10%, rgba(54,217,255,.07), transparent 60%),
    radial-gradient(900px 600px at 20% 40%, rgba(68,255,179,.05), transparent 60%),
    var(--bg);
  overflow-x:hidden;
}

/* subtle grid */
body::before{
  content:"";
  position:fixed; inset:0;
  background-image:
    linear-gradient(to right, rgba(255,255,255,.045) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(255,255,255,.045) 1px, transparent 1px);
  background-size: 72px 72px;
  opacity:.06;
  pointer-events:none;
  z-index:0;
}

/* noise */
body::after{
  content:"";
  position:fixed; inset:0;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='.22'/%3E%3C/svg%3E");
  mix-blend-mode: overlay;
  opacity:.08;
  pointer-events:none;
  z-index:0;
}

/* ===== Topbar ===== */
.topbar{
  position:sticky;
  top:0;
  z-index:10;
  background: rgba(6,7,10,.72);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255,255,255,.08);
  padding: 16px 18px;
}

.brand__title{
  font-weight:900;
  letter-spacing:.14em;
  text-transform:uppercase;
  font-size:14px;
}

.brand__sub{
  margin-top:6px;
  font-family: var(--mono);
  letter-spacing:.12em;
  font-size:11px;
  color: var(--muted);
}

.quick{
  margin-top:10px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}

.quick .q{
  font-family: var(--mono);
  font-size:11px;
  letter-spacing:.12em;
  text-decoration:none;
  color: rgba(234,242,255,.86);
  padding:8px 10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.18);
  transition: border-color .18s ease, transform .08s ease;
}
.quick .q:hover{
  border-color: rgba(54,217,255,.25);
  transform: translateY(-1px);
}

/* ===== Layout (columns) ===== */
.layout{
  position:relative;
  z-index:1;
  max-width: 1160px;
  margin: 18px auto 36px;
  padding: 0 16px;
  display:grid;
  grid-template-columns: 360px 1fr;
  gap:16px;
}

@media (max-width: 980px){
  .layout{ grid-template-columns: 1fr; }
}

/* ===== Cards ===== */
.card{
  border-radius: var(--r);
  background:
    linear-gradient(180deg, rgba(12,16,24,.82), rgba(6,8,12,.78));
  border: 1px solid rgba(255,255,255,.08);
  box-shadow:
    0 18px 50px rgba(0,0,0,.55),
    inset 0 1px 0 rgba(255,255,255,.04);
  padding: 14px 14px 12px;
}


.card__title{
  font-family: var(--mono);
  font-size:11px;
  letter-spacing:.16em;
  color: var(--muted);
  text-transform:uppercase;
  margin-bottom:12px;
}

/* ===== Subject photo ===== */
.photo{
  width:100%;
  max-width: 320px;
  margin: 8px auto 14px;
  border-radius: 16px;
  border:1px solid rgba(255,255,255,.10);
  overflow:hidden;
  background: rgba(0,0,0,.18);
}

.photo img{
  width:100%;
  height:auto;
  display:block;
  object-fit:contain;
  filter: grayscale(1) contrast(1.08) brightness(.92);
  background: rgba(0,0,0,.25);
}

.photo__cap{
  text-align:center;
  font-family: var(--mono);
  font-size:10px;
  letter-spacing:.16em;
  color: var(--muted);
  padding: 10px 10px;
  background: rgba(0,0,0,.22);
  border-top:1px dashed rgba(255,255,255,.12);
}

/* ===== Key/value list ===== */
.kvlist{
  list-style:none;
  padding:0;
  margin: 0;
  display:flex;
  flex-direction:column;
  gap:10px;
}

.kvlist li{
  display:flex;
  justify-content:space-between;
  gap:12px;
  padding: 10px 10px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.06);
  background: rgba(0,0,0,.14);
}

.kvlist li span{
  color: var(--muted);
  font-family: var(--mono);
  font-size:11px;
  letter-spacing:.08em;
  white-space:nowrap;
}

.kvlist li b{
  font-weight:700;
  text-align:right;
}

/* ===== Tags / micro ===== */
.tags{display:flex; gap:8px; flex-wrap:wrap; margin-top:12px}
.tag{
  font-family: var(--mono);
  font-size:10px;
  letter-spacing:.12em;
  padding:6px 8px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.18);
  color: rgba(234,242,255,.86);
}

.mono{font-family: var(--mono)}
.micro{
  margin-top:12px;
  padding: 10px 12px;
  border-radius: 14px;
  border:1px dashed rgba(255,255,255,.10);
  background: rgba(0,0,0,.14);
  color: rgba(234,242,255,.84);
  font-size:12px;
  line-height:1.5;
}

/* ===== Main text readability ===== */
.main p{
  margin:0 0 12px;
  line-height:1.65;
  color: rgba(234,242,255,.92);
}

.muted{color: var(--muted)}
.warn{color: var(--warn)}

.pill{
  display:inline-block;
  padding: 6px 10px;
  border-radius: 999px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.16);
  font-family: var(--mono);
  font-size:11px;
  letter-spacing:.12em;
}

/* ===== Notes list ===== */
.list{
  margin:0;
  padding-left:18px;
  line-height:1.7;
}

/* ===== REDACTED ===== */
.redact{
  display:inline-block;
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.55);
  color: rgba(234,242,255,.92);
  font-family: var(--mono);
  letter-spacing: .10em;
  cursor: pointer;
  user-select: none;
  white-space:nowrap;
}

.redact:hover{ border-color: rgba(54,217,255,.25); }
.redact.is-static{ cursor:not-allowed; opacity:.85; }
.redact.is-revealed{
  letter-spacing:.02em;
  background: rgba(54,217,255,.08);
  border-color: rgba(54,217,255,.25);
}

.log{
  display:flex;
  flex-direction:column;
  gap:8px;
  padding: 10px 12px;
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.08);
  background: rgba(0,0,0,.14);
  font-size:12px;
  line-height:1.55;
  color: rgba(234,242,255,.86);
}
.log div{
  padding: 8px 10px;
  border-radius: 12px;
  border:1px dashed rgba(255,255,255,.10);
  background: rgba(0,0,0,.10);
}

.card__title{
  position:relative;
}

.card__title::after{
  content:"";
  display:block;
  width:48px;
  height:1px;
  margin-top:8px;
  background: linear-gradient(
    to right,
    rgba(54,217,255,.35),
    transparent
  );
}

.main section.card + section.card{
  margin-top: 4px;
}

.brand__meta{
  margin-top:4px;
  font-family: var(--mono);
  letter-spacing:.18em;
  font-size:10px;
  color: var(--muted);
  opacity:.75;
  text-transform: uppercase;
}

.brand__title{
  position:relative;
  display:inline-block;
}

.brand__title:hover{
  text-shadow: 1px 0 rgba(54,217,255,.35), -1px 0 rgba(255,77,125,.22);
}

.q:hover{
  text-shadow: 1px 0 rgba(54,217,255,.28), -1px 0 rgba(255,77,125,.18);
}

.redact:hover{
  text-shadow: 1px 0 rgba(54,217,255,.25), -1px 0 rgba(255,77,125,.18);
}

.note{
  margin-top:12px;
  border-radius:16px;
  border:1px solid rgba(255,77,125,.22);
  background: rgba(255,77,125,.06);
  padding:12px;
}
.note__title{
  color: rgba(255,77,125,.9);
  letter-spacing:.16em;
  font-size:11px;
}
.note__body{
  margin-top:8px;
  color: rgba(234,242,255,.9);
  line-height:1.6;
}
.grid2{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:12px;
}
@media (max-width: 980px){
  .grid2{ grid-template-columns:1fr; }
}

/* ARCHIVE: убираем столбцы полностью */
.archive .layout{
  display: block;       /* ломаем grid */
  max-width: 1100px;
  margin: 0 auto;
  padding: 0 16px;
}

.archive .main{
  max-width: 760px;     /* читаемая колонка */
  margin: 0 auto;
}

/* make cards breathe a bit more */
.archive .card{
  padding: 18px 18px 16px;
  margin-left: auto;
  margin-right: auto;
}

/* paragraphs a bit nicer */
.archive .card p{
  line-height: 1.75;
  font-size: 15px;
  color: rgba(234,242,255,.88);
}

/* tighter spacing between cards */
.archive .main .card + .card{
  margin-top: 12px;
}

.archive .quick{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-top:10px;
}

.archive .q{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:9px 12px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.16);
  font-family: var(--mono);
  font-size:11px;
  letter-spacing:.14em;
  color: rgba(234,242,255,.86);
  text-decoration:none;
}

.archive .q:hover{
  border-color: rgba(54,217,255,.25);
  text-shadow: 1px 0 rgba(54,217,255,.25), -1px 0 rgba(255,77,125,.15);
}

.evidence{
  margin: 14px 0 18px;
  border-radius: 18px;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.25);
}

.evidence img{
  width:100%;
  height:auto;
  display:block;
  filter: grayscale(1) contrast(1.05) brightness(.92);
}

.evidence__cap{
  padding:10px 12px;
  font-size:11px;
  letter-spacing:.14em;
  color: rgba(234,242,255,.65);
  background: linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,.15));
}

.video{
  width:100%;
  border-bottom: 1px solid rgba(255,255,255,.10);
  padding: 12px;         
  background: rgba(0,0,0,.14);
  border-radius: 16px;
}

.video video{
  width:100%;
  height: auto;
  display:block;
  max-height: 420px;           
  object-fit: contain;       
  border-radius: 12px;
  background: #000;
}

.dossier-grid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:16px;
  margin-top:14px;
}

.dossier-tile{
  display:grid;
  grid-template-columns:96px 1fr;
  gap:14px;
  align-items:center;

  padding:16px 16px;
  border-radius:16px;

  border:1px solid rgba(255,255,255,.10);
  background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,0));
  box-shadow: 0 18px 50px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.03);

  text-decoration:none;
  color: var(--text);
}

.dossier-tile:hover{
  border-color: rgba(255,80,100,.20);
  box-shadow: 0 22px 60px rgba(0,0,0,.6), inset 0 1px 0 rgba(255,80,100,.05);
}

.dossier-tile{
  grid-template-columns: 120px 1fr;
}

.dossier-tile .thumb{
  width:120px;
  aspect-ratio: 3 / 4;
  height:auto;
  border-radius:12px;
  overflow:hidden;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.18);
}

.dossier-tile .thumb img{
  width:100%;
  height:100%;
  display:block;
  object-fit: contain; /* НЕ кропаем */
  filter: grayscale(1) contrast(1.08) brightness(.92);
  background: rgba(0,0,0,.25);
}

.dossier-tile .name{
  font-weight:700;
  letter-spacing:.12em;
}

.dossier-tile .role{
  margin-top:4px;
  opacity:.7;
}

.dossier-tile .tags{
  margin-top:10px;
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}

/* HOME PAGE ONLY */
.home .layout{
  grid-template-columns: 1fr;
}

.home .main{
  max-width: 760px;
  margin: 0 auto;
}

.connected-as{
  position: absolute;
  top: 14px;
  right: 18px;

  font-size: 11px;
  letter-spacing: .14em;
  text-transform: uppercase;

  opacity: .45;
  pointer-events: none;
  user-select: none;
  white-space: nowrap;
}

.connected-as span{
  color: #ff2e2e; /* красный ник */
  opacity: .95;
  text-shadow: 0 0 6px rgba(255,46,46,.35);
}

/* === CYBER PLAGUE GLITCH === */

.dossier-tile.cyber-plague .card,
.dossier-tile .card.cyber-plague{
  position: relative;
  overflow: hidden;
}

.dossier-tile.cyber-plague .card::before,
.dossier-tile .card.cyber-plague::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;

  background:
    repeating-linear-gradient(
      0deg,
      rgba(255,46,46,.14),
      rgba(255,46,46,.14) 1px,
      transparent 1px,
      transparent 4px
    );

  opacity: .05;
  mix-blend-mode: screen;
  animation: plagueBurst 4.8s infinite steps(1);
}

.dossier-tile.cyber-plague .card::after,
.dossier-tile .card.cyber-plague::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background: rgba(255,46,46,.16);
  mix-blend-mode: overlay;

  opacity: 0;
  animation: plagueFlash 4.8s infinite steps(1);
}

@keyframes plagueBurst{
  0%, 7%, 100% { opacity: .05; transform: translate(0); }
  8%  { opacity: .55; transform: translate(-2px, 1px); }
  9%  { opacity: .08; transform: translate(0); }
  22% { opacity: .45; transform: translate(2px, -1px); }
  23% { opacity: .06; transform: translate(0); }
  61% { opacity: .50; transform: translate(-3px, 0); }
  62% { opacity: .06; transform: translate(0); }
  86% { opacity: .40; transform: translate(1px, 2px); }
  87% { opacity: .05; transform: translate(0); }
}

@keyframes plagueFlash{
  0%, 7%, 9%, 22%, 23%, 61%, 62%, 86%, 87%, 100% { opacity: 0; }
  8%  { opacity: .28; }
  22% { opacity: .22; }
  61% { opacity: .26; }
  86% { opacity: .20; }
}

/* ===== GLITCH DISTORTION (GEOMETRY BREAK) ===== */

.dossier-tile.cyber-plague .card,
.dossier-tile .card.cyber-plague{
  position: relative;
  overflow: hidden;
  will-change: clip-path, transform;
  /* редкий геом-глитч (синхроним по 4.8s) */
  animation: plagueDistort 4.8s infinite steps(1);
}

/* --- базовые слои глитча поверх карточки --- */
.dossier-tile.cyber-plague .card::before,
.dossier-tile .card.cyber-plague::before,
.dossier-tile.cyber-plague .card::after,
.dossier-tile .card.cyber-plague::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
}

/* слой скан-линий (обычно тихий, иногда вспышка) */
.dossier-tile.cyber-plague .card::before,
.dossier-tile .card.cyber-plague::before{
  background:
    repeating-linear-gradient(
      0deg,
      rgba(255,46,46,.16),
      rgba(255,46,46,.16) 1px,
      transparent 1px,
      transparent 4px
    );
  mix-blend-mode: screen;
  opacity: .04;
  animation: plagueNoise 4.8s infinite steps(1);
}

/* слой вспышки/оверлея + “двойник” по краям */
.dossier-tile.cyber-plague .card::after,
.dossier-tile .card.cyber-plague::after{
  background: rgba(255,46,46,.18);
  mix-blend-mode: overlay;
  opacity: 0;
  animation: plagueFlash 4.8s infinite steps(1);

  /* лёгкий “канальный” сдвиг */
  box-shadow:
    -1px 0 rgba(255,46,46,.35),
     1px 0 rgba(255,46,46,.15);
}

/* --- геометрический разрыв карточки (редко, коротко) --- */
@keyframes plagueDistort{
  0%, 86%, 100%{
    clip-path: inset(0 0 0 0);
    transform: translate(0);
  }
  87%{
    clip-path: inset(6% 0 14% 0);
    transform: translate(-2px, 1px);
  }
  88%{
    clip-path: inset(20% 0 8% 0);
    transform: translate(2px, -1px);
  }
  89%{
    clip-path: inset(0 0 0 0);
    transform: translate(0);
  }
}

/* --- шум/полосы вспыхивают/пропадают --- */
@keyframes plagueNoise{
  0%, 7%, 22%, 61%, 86%, 100% { opacity: .04; transform: translate(0); }
  8%  { opacity: .55; transform: translate(-2px, 1px); }
  9%  { opacity: .06; transform: translate(0); }
  23% { opacity: .06; transform: translate(0); }
  62% { opacity: .06; transform: translate(0); }
  87% { opacity: .05; transform: translate(0); }
}

/* --- красные вспышки оверлея --- */
@keyframes plagueFlash{
  0%, 7%, 9%, 22%, 23%, 61%, 62%, 86%, 87%, 100% { opacity: 0; }
  8%  { opacity: .28; }
  22% { opacity: .22; }
  61% { opacity: .26; }
  86% { opacity: .20; }
}

/* =======================
   IMAGE GLITCH (только портрет)
   ======================= */

.dossier-tile.cyber-plague .thumb,
.dossier-tile .card.cyber-plague .thumb{
  position: relative;
  overflow: hidden;
}

.dossier-tile.cyber-plague .thumb img,
.dossier-tile .card.cyber-plague .thumb img{
  will-change: transform, filter;
  animation: thumbGlitch 4.8s infinite steps(1);
}

@keyframes thumbGlitch{
  0%, 86%, 100% { transform: translate(0); filter: none; }
  87% { transform: translate(-3px, 1px); filter: contrast(1.15) saturate(1.25); }
  88% { transform: translate(3px, -1px); filter: contrast(1.05) saturate(1.10); }
  89% { transform: translate(0); filter: none; }
}

/* =======================
   HOVER: pulse + чаще глитч
   ======================= */

.dossier-tile.cyber-plague:hover,
.dossier-tile:hover .card.cyber-plague{
  animation: plaguePulse 1.1s ease-in-out infinite;
}

@keyframes plaguePulse{
  0% { transform: translateY(0) scale(1); }
  50%{ transform: translateY(-1px) scale(1.01); }
  100%{ transform: translateY(0) scale(1); }
}

/* ускоряем вспышки на hover */
.dossier-tile.cyber-plague:hover .card,
.dossier-tile:hover .card.cyber-plague{
  animation-duration: 3.2s;
}

.dossier-tile.cyber-plague:hover .card::before,
.dossier-tile.cyber-plague:hover .card::after,
.dossier-tile:hover .card.cyber-plague::before,
.dossier-tile:hover .card.cyber-plague::after{
  animation-duration: 3.2s;
}

.dossier-tile.cyber-plague:hover .thumb img,
.dossier-tile:hover .card.cyber-plague .thumb img{
  animation-duration: 3.2s;
}

/* =======================
   RED NAME (optional)
   ======================= */
.dossier-tile.cyber-plague .name,
.dossier-tile .card.cyber-plague .name{
  color: #ff2e2e;
  text-shadow: 0 0 8px rgba(255,46,46,.45);
}

/* =======================
   A11y: reduce motion
   ======================= */
@media (prefers-reduced-motion: reduce){
  .dossier-tile.cyber-plague .card,
  .dossier-tile .card.cyber-plague,
  .dossier-tile.cyber-plague .thumb img,
  .dossier-tile .card.cyber-plague .thumb img{
    animation: none !important;
  }
  .dossier-tile.cyber-plague .card::before,
  .dossier-tile.cyber-plague .card::after,
  .dossier-tile .card.cyber-plague::before,
  .dossier-tile .card.cyber-plague::after{
    animation: none !important;
    opacity: .18;
  }
}
