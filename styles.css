:root{
  --bg:#06070a;
  --panel1: rgba(10,14,20,.78);
  --panel2: rgba(6,8,12,.74);
  --line: rgba(255,255,255,.10);
  --text:#eaf2ff;
  --muted:#97a6c6;
  --ok:#44ffb3;
  --warn:#ff4d7d;
  --cyan:#36d9ff;

  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;

  --r:18px;
  --shadow: 0 18px 50px rgba(0,0,0,.58);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:var(--sans);
  color:var(--text);
  background:
    radial-gradient(900px 600px at 60% 10%, rgba(54,217,255,.07), transparent 60%),
    radial-gradient(900px 600px at 20% 40%, rgba(68,255,179,.05), transparent 60%),
    var(--bg);
  overflow-x:hidden;
}

/* subtle grid */
body::before{
  content:"";
  position:fixed; inset:0;
  background-image:
    linear-gradient(to right, rgba(255,255,255,.045) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(255,255,255,.045) 1px, transparent 1px);
  background-size: 72px 72px;
  opacity:.06;
  pointer-events:none;
  z-index:0;
}

/* noise */
body::after{
  content:"";
  position:fixed; inset:0;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='.22'/%3E%3C/svg%3E");
  mix-blend-mode: overlay;
  opacity:.08;
  pointer-events:none;
  z-index:0;
}

/* ===== Topbar ===== */
.topbar{
  position:sticky;
  top:0;
  z-index:10;
  background: rgba(6,7,10,.72);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255,255,255,.08);
  padding: 16px 18px;
}

.brand__title{
  font-weight:900;
  letter-spacing:.14em;
  text-transform:uppercase;
  font-size:14px;
}

.brand__sub{
  margin-top:6px;
  font-family: var(--mono);
  letter-spacing:.12em;
  font-size:11px;
  color: var(--muted);
}

.quick{
  margin-top:10px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}

.quick .q{
  font-family: var(--mono);
  font-size:11px;
  letter-spacing:.12em;
  text-decoration:none;
  color: rgba(234,242,255,.86);
  padding:8px 10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.18);
  transition: border-color .18s ease, transform .08s ease;
}
.quick .q:hover{
  border-color: rgba(54,217,255,.25);
  transform: translateY(-1px);
}

/* ===== Layout (columns) ===== */
.layout{
  position:relative;
  z-index:1;
  max-width: 1160px;
  margin: 18px auto 36px;
  padding: 0 16px;
  display:grid;
  grid-template-columns: 360px 1fr;
  gap:16px;
}

@media (max-width: 980px){
  .layout{ grid-template-columns: 1fr; }
}

/* ===== Cards ===== */
.card{
  border-radius: var(--r);
  background:
    linear-gradient(180deg, rgba(12,16,24,.82), rgba(6,8,12,.78));
  border: 1px solid rgba(255,255,255,.08);
  box-shadow:
    0 18px 50px rgba(0,0,0,.55),
    inset 0 1px 0 rgba(255,255,255,.04);
  padding: 14px 14px 12px;
}


.card__title{
  font-family: var(--mono);
  font-size:11px;
  letter-spacing:.16em;
  color: var(--muted);
  text-transform:uppercase;
  margin-bottom:12px;
}

/* ===== Subject photo ===== */
.photo{
  width:100%;
  max-width: 320px;
  margin: 8px auto 14px;
  border-radius: 16px;
  border:1px solid rgba(255,255,255,.10);
  overflow:hidden;
  background: rgba(0,0,0,.18);
}

.photo img{
  width:100%;
  height:auto;
  display:block;
  object-fit:contain;
  filter: grayscale(1) contrast(1.08) brightness(.92);
  background: rgba(0,0,0,.25);
}

.photo__cap{
  text-align:center;
  font-family: var(--mono);
  font-size:10px;
  letter-spacing:.16em;
  color: var(--muted);
  padding: 10px 10px;
  background: rgba(0,0,0,.22);
  border-top:1px dashed rgba(255,255,255,.12);
}

/* ===== Key/value list ===== */
.kvlist{
  list-style:none;
  padding:0;
  margin: 0;
  display:flex;
  flex-direction:column;
  gap:10px;
}

.kvlist li{
  display:flex;
  justify-content:space-between;
  gap:12px;
  padding: 10px 10px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.06);
  background: rgba(0,0,0,.14);
}

.kvlist li span{
  color: var(--muted);
  font-family: var(--mono);
  font-size:11px;
  letter-spacing:.08em;
  white-space:nowrap;
}

.kvlist li b{
  font-weight:700;
  text-align:right;
}

/* ===== Tags / micro ===== */
.tags{display:flex; gap:8px; flex-wrap:wrap; margin-top:12px}
.tag{
  font-family: var(--mono);
  font-size:10px;
  letter-spacing:.12em;
  padding:6px 8px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.18);
  color: rgba(234,242,255,.86);
}

.mono{font-family: var(--mono)}
.micro{
  margin-top:12px;
  padding: 10px 12px;
  border-radius: 14px;
  border:1px dashed rgba(255,255,255,.10);
  background: rgba(0,0,0,.14);
  color: rgba(234,242,255,.84);
  font-size:12px;
  line-height:1.5;
}

/* ===== Main text readability ===== */
.main p{
  margin:0 0 12px;
  line-height:1.65;
  color: rgba(234,242,255,.92);
}

.muted{color: var(--muted)}
.warn{color: var(--warn)}

.pill{
  display:inline-block;
  padding: 6px 10px;
  border-radius: 999px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.16);
  font-family: var(--mono);
  font-size:11px;
  letter-spacing:.12em;
}

/* ===== Notes list ===== */
.list{
  margin:0;
  padding-left:18px;
  line-height:1.7;
}

/* ===== REDACTED ===== */
.redact{
  display:inline-block;
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.55);
  color: rgba(234,242,255,.92);
  font-family: var(--mono);
  letter-spacing: .10em;
  cursor: pointer;
  user-select: none;
  white-space:nowrap;
}

.redact:hover{ border-color: rgba(54,217,255,.25); }
.redact.is-static{ cursor:not-allowed; opacity:.85; }
.redact.is-revealed{
  letter-spacing:.02em;
  background: rgba(54,217,255,.08);
  border-color: rgba(54,217,255,.25);
}

.log{
  display:flex;
  flex-direction:column;
  gap:8px;
  padding: 10px 12px;
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.08);
  background: rgba(0,0,0,.14);
  font-size:12px;
  line-height:1.55;
  color: rgba(234,242,255,.86);
}
.log div{
  padding: 8px 10px;
  border-radius: 12px;
  border:1px dashed rgba(255,255,255,.10);
  background: rgba(0,0,0,.10);
}

.card__title{
  position:relative;
}

.card__title::after{
  content:"";
  display:block;
  width:48px;
  height:1px;
  margin-top:8px;
  background: linear-gradient(
    to right,
    rgba(54,217,255,.35),
    transparent
  );
}

.main section.card + section.card{
  margin-top: 4px;
}

.brand__meta{
  margin-top:4px;
  font-family: var(--mono);
  letter-spacing:.18em;
  font-size:10px;
  color: var(--muted);
  opacity:.75;
  text-transform: uppercase;
}

.brand__title{
  position:relative;
  display:inline-block;
}

.brand__title:hover{
  text-shadow: 1px 0 rgba(54,217,255,.35), -1px 0 rgba(255,77,125,.22);
}

.q:hover{
  text-shadow: 1px 0 rgba(54,217,255,.28), -1px 0 rgba(255,77,125,.18);
}

.redact:hover{
  text-shadow: 1px 0 rgba(54,217,255,.25), -1px 0 rgba(255,77,125,.18);
}

.note{
  margin-top:12px;
  border-radius:16px;
  border:1px solid rgba(255,77,125,.22);
  background: rgba(255,77,125,.06);
  padding:12px;
}
.note__title{
  color: rgba(255,77,125,.9);
  letter-spacing:.16em;
  font-size:11px;
}
.note__body{
  margin-top:8px;
  color: rgba(234,242,255,.9);
  line-height:1.6;
}
.grid2{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:12px;
}
@media (max-width: 980px){
  .grid2{ grid-template-columns:1fr; }
}

/* ARCHIVE: убираем столбцы полностью */
.archive .layout{
  display: block;       /* ломаем grid */
  max-width: 1100px;
  margin: 0 auto;
  padding: 0 16px;
}

.archive .main{
  max-width: 760px;     /* читаемая колонка */
  margin: 0 auto;
}

/* make cards breathe a bit more */
.archive .card{
  padding: 18px 18px 16px;
  margin-left: auto;
  margin-right: auto;
}

/* paragraphs a bit nicer */
.archive .card p{
  line-height: 1.75;
  font-size: 15px;
  color: rgba(234,242,255,.88);
}

/* tighter spacing between cards */
.archive .main .card + .card{
  margin-top: 12px;
}

.archive .quick{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-top:10px;
}

.archive .q{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:9px 12px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.16);
  font-family: var(--mono);
  font-size:11px;
  letter-spacing:.14em;
  color: rgba(234,242,255,.86);
  text-decoration:none;
}

.archive .q:hover{
  border-color: rgba(54,217,255,.25);
  text-shadow: 1px 0 rgba(54,217,255,.25), -1px 0 rgba(255,77,125,.15);
}

.evidence{
  margin: 14px 0 18px;
  border-radius: 18px;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.25);
}

.evidence img{
  width:100%;
  height:auto;
  display:block;
  filter: grayscale(1) contrast(1.05) brightness(.92);
}

.evidence__cap{
  padding:10px 12px;
  font-size:11px;
  letter-spacing:.14em;
  color: rgba(234,242,255,.65);
  background: linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,.15));
}

.video{
  width:100%;
  border-bottom: 1px solid rgba(255,255,255,.10);
  padding: 12px;         
  background: rgba(0,0,0,.14);
  border-radius: 16px;
}

.video video{
  width:100%;
  height: auto;
  display:block;
  max-height: 420px;           
  object-fit: contain;       
  border-radius: 12px;
  background: #000;
}

.dossier-grid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:16px;
  margin-top:14px;
}

.dossier-tile{
  display:grid;
  grid-template-columns:96px 1fr;
  gap:14px;
  align-items:center;

  padding:16px 16px;
  border-radius:16px;

  border:1px solid rgba(255,255,255,.10);
  background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(0,0,0,0));
  box-shadow: 0 18px 50px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.03);

  text-decoration:none;
  color: var(--text);
}

.dossier-tile:hover{
  border-color: rgba(255,80,100,.20);
  box-shadow: 0 22px 60px rgba(0,0,0,.6), inset 0 1px 0 rgba(255,80,100,.05);
}

.dossier-tile{
  grid-template-columns: 120px 1fr;
}

.dossier-tile .thumb{
  width:120px;
  aspect-ratio: 3 / 4;
  height:auto;
  border-radius:12px;
  overflow:hidden;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.18);
}

.dossier-tile .thumb img{
  width:100%;
  height:100%;
  display:block;
  object-fit: contain; /* НЕ кропаем */
  filter: grayscale(1) contrast(1.08) brightness(.92);
  background: rgba(0,0,0,.25);
}

.dossier-tile .name{
  font-weight:700;
  letter-spacing:.12em;
}

.dossier-tile .role{
  margin-top:4px;
  opacity:.7;
}

.dossier-tile .tags{
  margin-top:10px;
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}

/* HOME PAGE ONLY */
.home .layout{
  grid-template-columns: 1fr;
}

.home .main{
  max-width: 760px;
  margin: 0 auto;
}

.connected-as{
  position: absolute;
  top: 14px;
  right: 18px;

  font-size: 11px;
  letter-spacing: .14em;
  text-transform: uppercase;

  opacity: .45;
  pointer-events: auto;   /* ВАЖНО: включаем клики */
  user-select: none;
  white-space: nowrap;
}

.connected-as span{
  color: #ff2e2e; /* красный ник */
  opacity: .95;
  text-shadow: 0 0 6px rgba(255,46,46,.35);
}

/* === CYBER PLAGUE GLITCH === */

.dossier-tile.cyber-plague .card,
.dossier-tile .card.cyber-plague{
  position: relative;
  overflow: hidden;
}

.dossier-tile.cyber-plague .card::before,
.dossier-tile .card.cyber-plague::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;

  background:
    repeating-linear-gradient(
      0deg,
      rgba(255,46,46,.14),
      rgba(255,46,46,.14) 1px,
      transparent 1px,
      transparent 4px
    );

  opacity: .05;
  mix-blend-mode: screen;
  animation: plagueBurst 4.8s infinite steps(1);
}

.dossier-tile.cyber-plague .card::after,
.dossier-tile .card.cyber-plague::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background: rgba(255,46,46,.16);
  mix-blend-mode: overlay;

  opacity: 0;
  animation: plagueFlash 4.8s infinite steps(1);
}

@keyframes plagueBurst{
  0%, 7%, 100% { opacity: .05; transform: translate(0); }
  8%  { opacity: .55; transform: translate(-2px, 1px); }
  9%  { opacity: .08; transform: translate(0); }
  22% { opacity: .45; transform: translate(2px, -1px); }
  23% { opacity: .06; transform: translate(0); }
  61% { opacity: .50; transform: translate(-3px, 0); }
  62% { opacity: .06; transform: translate(0); }
  86% { opacity: .40; transform: translate(1px, 2px); }
  87% { opacity: .05; transform: translate(0); }
}

@keyframes plagueFlash{
  0%, 7%, 9%, 22%, 23%, 61%, 62%, 86%, 87%, 100% { opacity: 0; }
  8%  { opacity: .28; }
  22% { opacity: .22; }
  61% { opacity: .26; }
  86% { opacity: .20; }
}

/* ===== GLITCH DISTORTION (GEOMETRY BREAK) ===== */

.dossier-tile.cyber-plague .card,
.dossier-tile .card.cyber-plague{
  position: relative;
  overflow: hidden;
  will-change: clip-path, transform;
  /* редкий геом-глитч (синхроним по 4.8s) */
  animation: plagueDistort 4.8s infinite steps(1);
}

/* --- базовые слои глитча поверх карточки --- */
.dossier-tile.cyber-plague .card::before,
.dossier-tile .card.cyber-plague::before,
.dossier-tile.cyber-plague .card::after,
.dossier-tile .card.cyber-plague::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
}

/* слой скан-линий (обычно тихий, иногда вспышка) */
.dossier-tile.cyber-plague .card::before,
.dossier-tile .card.cyber-plague::before{
  background:
    repeating-linear-gradient(
      0deg,
      rgba(255,46,46,.16),
      rgba(255,46,46,.16) 1px,
      transparent 1px,
      transparent 4px
    );
  mix-blend-mode: screen;
  opacity: .04;
  animation: plagueNoise 4.8s infinite steps(1);
}

/* слой вспышки/оверлея + “двойник” по краям */
.dossier-tile.cyber-plague .card::after,
.dossier-tile .card.cyber-plague::after{
  background: rgba(255,46,46,.18);
  mix-blend-mode: overlay;
  opacity: 0;
  animation: plagueFlash 4.8s infinite steps(1);

  /* лёгкий “канальный” сдвиг */
  box-shadow:
    -1px 0 rgba(255,46,46,.35),
     1px 0 rgba(255,46,46,.15);
}

/* --- геометрический разрыв карточки (редко, коротко) --- */
@keyframes plagueDistort{
  0%, 86%, 100%{
    clip-path: inset(0 0 0 0);
    transform: translate(0);
  }
  87%{
    clip-path: inset(6% 0 14% 0);
    transform: translate(-2px, 1px);
  }
  88%{
    clip-path: inset(20% 0 8% 0);
    transform: translate(2px, -1px);
  }
  89%{
    clip-path: inset(0 0 0 0);
    transform: translate(0);
  }
}

/* --- шум/полосы вспыхивают/пропадают --- */
@keyframes plagueNoise{
  0%, 7%, 22%, 61%, 86%, 100% { opacity: .04; transform: translate(0); }
  8%  { opacity: .55; transform: translate(-2px, 1px); }
  9%  { opacity: .06; transform: translate(0); }
  23% { opacity: .06; transform: translate(0); }
  62% { opacity: .06; transform: translate(0); }
  87% { opacity: .05; transform: translate(0); }
}

/* --- красные вспышки оверлея --- */
@keyframes plagueFlash{
  0%, 7%, 9%, 22%, 23%, 61%, 62%, 86%, 87%, 100% { opacity: 0; }
  8%  { opacity: .28; }
  22% { opacity: .22; }
  61% { opacity: .26; }
  86% { opacity: .20; }
}

/* =======================
   IMAGE GLITCH (только портрет)
   ======================= */

.dossier-tile.cyber-plague .thumb,
.dossier-tile .card.cyber-plague .thumb{
  position: relative;
  overflow: hidden;
}

.dossier-tile.cyber-plague .thumb img,
.dossier-tile .card.cyber-plague .thumb img{
  will-change: transform, filter;
  animation: thumbGlitch 4.8s infinite steps(1);
}

@keyframes thumbGlitch{
  0%, 86%, 100% { transform: translate(0); filter: none; }
  87% { transform: translate(-3px, 1px); filter: contrast(1.15) saturate(1.25); }
  88% { transform: translate(3px, -1px); filter: contrast(1.05) saturate(1.10); }
  89% { transform: translate(0); filter: none; }
}

/* =======================
   HOVER: pulse + чаще глитч
   ======================= */

.dossier-tile.cyber-plague:hover,
.dossier-tile:hover .card.cyber-plague{
  animation: plaguePulse 1.1s ease-in-out infinite;
}

@keyframes plaguePulse{
  0% { transform: translateY(0) scale(1); }
  50%{ transform: translateY(-1px) scale(1.01); }
  100%{ transform: translateY(0) scale(1); }
}

/* ускоряем вспышки на hover */
.dossier-tile.cyber-plague:hover .card,
.dossier-tile:hover .card.cyber-plague{
  animation-duration: 3.2s;
}

.dossier-tile.cyber-plague:hover .card::before,
.dossier-tile.cyber-plague:hover .card::after,
.dossier-tile:hover .card.cyber-plague::before,
.dossier-tile:hover .card.cyber-plague::after{
  animation-duration: 3.2s;
}

.dossier-tile.cyber-plague:hover .thumb img,
.dossier-tile:hover .card.cyber-plague .thumb img{
  animation-duration: 3.2s;
}

/* =======================
   A11y: reduce motion
   ======================= */
@media (prefers-reduced-motion: reduce){
  .dossier-tile.cyber-plague .card,
  .dossier-tile .card.cyber-plague,
  .dossier-tile.cyber-plague .thumb img,
  .dossier-tile .card.cyber-plague .thumb img{
    animation: none !important;
  }
  .dossier-tile.cyber-plague .card::before,
  .dossier-tile.cyber-plague .card::after,
  .dossier-tile .card.cyber-plague::before,
  .dossier-tile .card.cyber-plague::after{
    animation: none !important;
    opacity: .18;
  }
}

/* Красный “не solid” (градиент по тексту) */
.cyber-plague .name,
.cyber-plague .role,
.cyber-plague .tags{
  background: linear-gradient(90deg, rgba(255,46,46,.95), rgba(255,46,46,.25), rgba(255,46,46,.9));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

/* Двойник текста + срезы (визуально как “символы поплыли”) */
.cyber-plague [data-glitch]{
  position: relative;
}

.cyber-plague [data-glitch]::before,
.cyber-plague [data-glitch]::after{
  content: attr(data-glitch);
  position: absolute;
  left: 0; top: 0;
  width: 100%;
  pointer-events: none;
  opacity: 0;
  -webkit-text-fill-color: transparent;
  background: linear-gradient(90deg, rgba(255,46,46,.95), rgba(255,46,46,.1));
  -webkit-background-clip: text;
  background-clip: text;
}

.cyber-plague [data-glitch]::before{
  transform: translate(-1px,0);
  text-shadow: 1px 0 rgba(255,46,46,.35);
  animation: textFlicker 4.8s infinite steps(1);
}

.cyber-plague [data-glitch]::after{
  transform: translate(1px,0);
  text-shadow: -1px 0 rgba(255,46,46,.2);
  animation: textFlicker2 4.8s infinite steps(1);
}

@keyframes textFlicker{
  0%, 86%, 100%{ opacity: 0; clip-path: inset(0 0 0 0); }
  87%{ opacity: .8; clip-path: inset(0 0 72% 0); }
  88%{ opacity: .35; clip-path: inset(40% 0 20% 0); }
  89%{ opacity: 0; }
}

@keyframes textFlicker2{
  0%, 21%, 61%, 100%{ opacity: 0; }
  22%{ opacity: .65; clip-path: inset(55% 0 0 0); }
  23%{ opacity: 0; }
  62%{ opacity: .55; clip-path: inset(0 0 60% 0); }
  63%{ opacity: 0; }
}

/* ===== plague tag hover swap ===== */

.dossier-tile.cyber-plague .plague-swap{
  position: relative;
  overflow: hidden;
}

/* показываем оригинал обычно */
.dossier-tile.cyber-plague .plague-swap{
  color: rgba(255,46,46,.9);
}

/* при наведении прячем оригинальный текст */
.dossier-tile.cyber-plague:hover .plague-swap{
  color: transparent;
}

/* и рисуем новый текст поверх */
.dossier-tile.cyber-plague:hover .plague-swap::after{
  content: attr(data-hover);
  position: absolute;
  left: 0;
  right: 0;
  top: 50%;
  transform: translateY(-50%);

  text-align: center;
  letter-spacing: .18em;
  text-transform: uppercase;

  background: linear-gradient(90deg, rgba(255,46,46,.95), rgba(255,46,46,.2), rgba(255,46,46,.9));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;

  text-shadow: 0 0 10px rgba(255,46,46,.25);
  animation: tagFlicker 0.9s steps(1) infinite;
}

@keyframes tagFlicker{
  0%, 60%, 100% { opacity: 1; }
  61% { opacity: .35; }
  62% { opacity: 1; }
  80% { opacity: .6; }
  81% { opacity: 1; }
}

/* ===== FULLSCREEN GLITCH OVERLAY ===== */
.glitch-overlay{
  position: fixed;
  inset: 0;
  z-index: 99999;
  pointer-events: none;
  opacity: 0;
  transform: translateZ(0);
}

.glitch-overlay::before,
.glitch-overlay::after{
  content:"";
  position: absolute;
  inset: -10%;
  pointer-events: none;
}

/* шум + скан-линии */
.glitch-overlay::before{
  background:
    repeating-linear-gradient(
      0deg,
      rgba(255,46,46,.14),
      rgba(255,46,46,.14) 1px,
      transparent 1px,
      transparent 4px
    ),
    radial-gradient(circle at 70% 30%,
      rgba(255,46,46,.20) 0%,
      rgba(255,46,46,.10) 35%,
      rgba(0,0,0,0) 70%);
  mix-blend-mode: screen;
  opacity: .9;
}

/* рывки/вспышки */
.glitch-overlay::after{
  background: rgba(255,46,46,.18);
  mix-blend-mode: overlay;
  opacity: .65;
}

/* запустить “ломание” */
.glitch-overlay.is-on{
  animation: uiBreak 650ms steps(1) forwards;
}

@keyframes uiBreak{
  0%   { opacity: 0; transform: translate(0); filter: blur(0px); }
  10%  { opacity: 1; transform: translate(-6px, 2px); }
  18%  { opacity: .55; transform: translate(6px, -2px); }
  26%  { opacity: 1; transform: translate(-3px, 0); }
  38%  { opacity: .35; transform: translate(2px, 2px); filter: blur(1px); }
  52%  { opacity: 1; transform: translate(-2px, -2px); }
  70%  { opacity: .55; transform: translate(4px, 1px); }
  100% { opacity: 0; transform: translate(0); filter: blur(0px); }
}

/* A11y */
@media (prefers-reduced-motion: reduce){
  .glitch-overlay.is-on{ animation: none; opacity: .35; }
}

/* ===== DEAD PIXEL LAYER ===== */
.glitch-overlay .deadpx{
  position: absolute;
  inset: 0;
  opacity: 0;
  mix-blend-mode: screen;
  pointer-events: none;
}

.glitch-overlay.is-on .deadpx{
  animation: deadPxBurst 650ms steps(1) forwards;
}

.glitch-overlay .deadpx span{
  position: absolute;
  width: 10px;
  height: 10px;
  background: rgba(255,46,46,.85);
  box-shadow: 0 0 12px rgba(255,46,46,.35);
  opacity: 0;
}

@keyframes deadPxBurst{
  0%   { opacity: 0; }
  10%  { opacity: 1; }
  35%  { opacity: 1; }
  100% { opacity: 0; }
}

/* during global glitch: only glitched texts turn red */
.fx-glitch-red{
  background: linear-gradient(90deg, rgba(255,46,46,.95), rgba(255,46,46,.25), rgba(255,46,46,.9));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  text-shadow: 0 0 10px rgba(255,46,46,.18);
}

.redact.is-dynamic{
  letter-spacing:.14em;
  animation: redactFlicker 2.4s infinite;
}

@keyframes redactFlicker{
  0%,100%{ opacity:.9 }
  55%{ opacity:.65 }
}

.glow{
  text-shadow: 0 0 8px rgba(255,60,60,.35);
}

/* ===== Daniel: false data line ===== */
.ghostline{
  margin-top: 10px;
  font-size: 11px;
  letter-spacing: .22em;
  opacity: .55;
  user-select: none;
  white-space: nowrap;
}

.ghostline.is-fake{
  opacity: .95;
  background: linear-gradient(90deg, rgba(255,46,46,.95), rgba(255,46,46,.25), rgba(255,46,46,.9));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  text-shadow: 0 0 10px rgba(255,46,46,.18);
}

/* ===== HOVER REACTION (ALL CARDS EXCEPT IREN/cyber-plague) ===== */

.dossier-tile:not(.cyber-plague) .card{
  transition:
    transform 220ms ease,
    box-shadow 220ms ease,
    border-color 220ms ease,
    filter 220ms ease;
  will-change: transform, filter;
}

/* лёгкий “подъём” + усиление глубины */
.dossier-tile:not(.cyber-plague):hover .card{
  transform: translateY(-2px);
  filter: brightness(1.04);
  box-shadow: 0 18px 55px rgba(0,0,0,.55);
}

/* тонкая подсветка рамки */
.dossier-tile:not(.cyber-plague):hover .card{
  border-color: rgba(255,255,255,.12);
}

/* микро-реакция плашек статуса */
.dossier-tile:not(.cyber-plague) .pill{
  transition: transform 180ms ease, filter 180ms ease, opacity 180ms ease;
}

.dossier-tile:not(.cyber-plague):hover .pill{
  transform: translateY(-1px);
  filter: brightness(1.06);
  opacity: .98;
}

/* по желанию: лёгкий “скан” поверх карточки */
.dossier-tile:not(.cyber-plague) .card::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  opacity:0;
  background: linear-gradient(
    180deg,
    transparent 0%,
    rgba(255,255,255,.05) 35%,
    transparent 70%
  );
  mix-blend-mode: screen;
  transition: opacity 220ms ease;
}

.dossier-tile:not(.cyber-plague):hover .card::after{
  opacity:.35;
}

/* ===== Local error state on tiles ===== */
.dossier-tile.is-error .card{
  animation: tileErrorShake 280ms steps(1) 1;
  border-color: rgba(255,46,46,.22);
  box-shadow: 0 22px 70px rgba(0,0,0,.6);
}

@keyframes tileErrorShake{
  0%{ transform: translate(0); }
  20%{ transform: translate(-2px, 1px); }
  40%{ transform: translate(2px, -1px); }
  60%{ transform: translate(-1px, -1px); }
  80%{ transform: translate(1px, 1px); }
  100%{ transform: translate(0); }
}

.tile-errorline{
  margin-top: 10px;
  font-size: 11px;
  letter-spacing: .22em;
  opacity: .9;
  user-select: none;

  background: linear-gradient(90deg, rgba(255,46,46,.95), rgba(255,46,46,.25), rgba(255,46,46,.9));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;

  text-shadow: 0 0 10px rgba(255,46,46,.18);
}

/* ===== GLOBAL AMBIENT SCAN / BREATH (subtle) ===== */
body::before{
  content:"";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;

  /* еле-еле скан + виньетка */
  background:
    repeating-linear-gradient(
      0deg,
      rgba(255,255,255,.02),
      rgba(255,255,255,.02) 1px,
      transparent 1px,
      transparent 5px
    ),
    radial-gradient(1200px 700px at 50% 30%, rgba(255,255,255,.04), transparent 60%),
    radial-gradient(900px 600px at 50% 120%, rgba(0,0,0,.55), transparent 60%);

  opacity: .12;
  mix-blend-mode: screen;
  animation: ambientBreath 7.5s ease-in-out infinite;
}

/* лёгкое “дыхание” */
@keyframes ambientBreath{
  0%, 100% { opacity: .10; filter: blur(.0px); }
  50%      { opacity: .16; filter: blur(.4px); }
}

.userlink{
  color: inherit;
  text-decoration: none;
  cursor: pointer;
}

.userlink:hover{
  text-decoration: underline;
  opacity: .95;
}

.connected-as .userlink{
  color:#ff2e2e;
  opacity:.95;
  text-shadow: 0 0 6px rgba(255,46,46,.35);
  text-decoration: none;
  cursor: pointer;
}
.connected-as .userlink:hover{ text-decoration: underline; }

.audio-log{
  width:100%;
  margin:12px 0;
  filter: grayscale(1);
}

.nav-files{
  margin-top: 32px;
  display: flex;
  justify-content: space-between;
  gap: 16px;
}

.nav-files a{
  position: relative;
  padding: 10px 16px;
  font-family: var(--mono);
  font-size: 12px;
  letter-spacing: .12em;
  text-transform: uppercase;

  color: var(--muted);
  text-decoration: none;

  border: 1px solid rgba(255,255,255,.12);
  border-radius: 8px;
  background: linear-gradient(
    180deg,
    rgba(255,255,255,.03),
    rgba(255,255,255,.01)
  );

  transition:
    color .2s ease,
    border-color .2s ease,
    box-shadow .2s ease,
    transform .15s ease;
}

.nav-files a:hover{
  color: #fff;
  border-color: rgba(120,180,255,.6);
  box-shadow:
    0 0 0 1px rgba(120,180,255,.15),
    0 0 24px rgba(120,180,255,.15);
  transform: translateY(-1px);
}

.nav-files a:active{
  transform: translateY(0);
}
